@model FreelancerProject.ViewModels.FilterFreelancersViewModel

@{
    ViewBag.Title = "Hitta frilansare";
    Layout = "~/Views/Shared/_Layout_Customer.cshtml";

}
<br />
<br />
<h2>Hitta frilansare</h2>
<hr />

@using (Html.BeginForm())
{
    <div class="form-inline">
        <h4>Fritext</h4>
        <form class="form-group">
            @Html.TextBoxFor(model => model.SearchWord, new { @class = "form-control" })

            <input type="submit" value="Sök" class="btn btn-primary" />
        </form>
    </div>
}
<button style="margin-top:2px" class="btn btn-default" onclick="location.href='@Url.Action("FilterFreelancers")'"> Rensa sökning </button>
<br />
<hr />


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-inline">
        <h4>Filtrera på kompetens</h4>
        <div class="row">
            <div class="col-md-2">
                @Html.DropDownListFor(model => model.RoleId, ViewBag.Roles as SelectList, "Välj roll", new { @class = "form-control col-md-8", @style = "width: 105%" })
            </div>
            <div class="col-md-2">
                @Html.DropDownListFor(model => model.CompetenceId, new SelectList(" "), "Välj kompetens", new { @class = "form-control col-md-8", @style = "width: 105%" })
            </div>

            <div class="col-md-8" style="width: 20%; margin: 10px;">
                @* TODO: Lös så den håller bredd vid mindre skärm *@
                <div id="slider"></div>
                <label style="font-weight: lighter;">Lägsta kompetensnivå: </label>
                <label id="value">5</label>
                @Html.HiddenFor(m => m.LowestRankToFilter)
            </div>

            <input type="submit" value="Sök" class="btn btn-primary" />
        </div>

        <div class="form-group">
            <button style="margin-top:2px" class="btn btn-default" onclick="location.href='@Url.Action("FilterFreelancers")'"> Rensa sökning </button>
        </div>

    </div>
}


<table class="table table-hover">
    <thead>
        <tr>
            <th>Förnamn</th>
            <th>Efternamn</th>
            <th>Kompetenser</th>
            <th>Mer om mig</th>
            <th>Profil</th>
            <th>CV</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Freelancers)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Firstname)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Lastname)
                </td>

                @*@foreach (var info in item.OtherInfo)
                    {
                        <td>
                            @info.CoreCompetences
                        </td>
                    }*@
                <td>
                    @foreach (var competence in item.Freelancer_Competence)
                    {

                        <span class="badge badge-light" data-toggle="popover" data-trigger="hover"
                              data-container="body" data-placement="top" style="background-color:cadetblue;"
                              data-content="Ranking: @competence.Ranking">
                            @competence.Competence.CompetenceName
                        </span>

                    }
                </td>
                <td>
                    @foreach (var info in item.OtherInfo)
                    {
                        <i class="fas fa-user-circle fa-2x" data-toggle="popover" data-trigger="hover"
                           data-container="body" data-placement="top" style="color:deepskyblue"
                           data-html="true"
                           title="Om mig"
                           data-content="<b>Kärnkompetenser:</b> @info.CoreCompetences.<br> <b>Om mig:</b> @info.ProfileMessage">
                        </i>
                    }
                </td>
                <td>
                    @Html.ActionLink("Se profil", "Vy", new { freelancerId = item.Id })
                </td>

                <td>
                    <a href="@Url.Action("CustomerView","FreelancerCV",new { id = item.Id })">Se CV</a>
                </td>
            </tr>
        }
    </tbody>
</table>


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval"),
    @Scripts.Render("~/bundles/jqueryui")
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">

    <script src="~/Scripts/MyScripts/DropdownForCompetences.js"></script>
    <script src="~/Scripts/MyScripts/slider.js"></script>
    <script src="~/Scripts/MyScripts/popover.js"></script>

    <script>
        $("#SearchWord").autocomplete({
            source: '@Url.Action("SearchCategory", "FreelancerPersons")'
        });
    </script>

}


